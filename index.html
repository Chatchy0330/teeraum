<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <title>Teeraum</title>
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 16000px;
      background: transparent;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: absolute;
      top: 1750px;
      left: 0;
      width: 100%;
      height: 13750px;
      /* 15500 - 1750 */
      background-color: #d7d7d7;
      z-index: 0;
      pointer-events: none;
    }

    body::after {
      content: "";
      position: absolute;
      top: 15500px;
      left: 0;
      width: 100%;
      height: 10000px;
      background-color: #94967a;
      z-index: 3;
      pointer-events: none;
    }

    #teeraum {
      position: fixed;
      top: 105px;
      right: 1vw;
      writing-mode: sideways-lr;
      text-orientation: sideways;
      font-family: Georgia, 'Times New Roman', Times, serif;
      font-size: clamp(10rem, 25vw, 50rem);
      color: #a0a0a07a;
      z-index: -1;
      line-height: 1.4;
      opacity: 1;
      letter-spacing: 0em;
      pointer-events: none;
    }

    #chapter1 {
      position: absolute;
      top: 1830px;
      left: 0;
      background: transparent;
      color: #ffffff;
      z-index: 1;
      font-size: clamp(1rem, 20vh, 30rem);
      text-align: left;
      font-family: Georgia, 'Times New Roman', Times, serif;
      margin: 0 0 0 5vh;
      /* 横中央に */
      line-height: 1;
    }

    #chapter1_text {
      position: absolute;
      top: 2300px;
      left: 0;
      background: transparent;
      color: #ffffff;
      z-index: 1;
      font-size: clamp(1rem, 6vh, 20rem);
      text-align: left;
      font-family: Georgia, 'Times New Roman', Times, serif;
      margin: 0 0 0 6vh;
      /* 横中央に */
      line-height: 1;
    }

    #chapter2 {
      position: absolute;
      top: 15580px;
      left: 0;
      background: transparent;
      color: #ffffff;
      z-index: 4;
      font-size: clamp(1rem, 20vh, 30rem);
      text-align: left;
      font-family: Georgia, 'Times New Roman', Times, serif;
      margin: 0 0 0 5vh;
      /* 横中央に */
      line-height: 1;
    }

    #chapter2_text {
      position: absolute;
      top: 16050px;
      left: 0;
      background: transparent;
      color: #ffffff;
      z-index: 4;
      font-size: clamp(1rem, 6vh, 20rem);
      text-align: left;
      font-family: Georgia, 'Times New Roman', Times, serif;
      margin: 0 0 0 6vh;
      /* 横中央に */
      line-height: 1;
    }


    /* 目次 */
    #toc {
      background: transparent;
      padding: 20px;
      font-size: 5em;
      line-height: 1.2;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: -2;
      pointer-events: none;
      /* 操作無効化（必要に応じて） */
    }

    #toc .toc-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    #toc .toc-list li {
      /* Flex を外してブロックに */
      display: block;
      margin-bottom: 1rem;
    }

    /* 番号を大きく・中央寄せ */
    #toc .toc-number {
      display: block;
      font-size: clamp(1rem, 13vh, 20rem);
      color: #a0a0a07a;
      text-align: left;
      font-family: Georgia, 'Times New Roman', Times, serif;
      margin: 0 0 0 3vh;
      /* 横中央に */
      line-height: 0.9;

    }

    /* 章題は番号の下に来る */
    #toc .toc-text {
      display: block;
      font-size: clamp(1rem, 3vh, 5rem);
      color: #222;
      line-height: 0.9;
      text-align: left;
      /* 必要に応じて中央揃え */
      font-family: Georgia, 'Times New Roman', Times, serif;
      margin: 3vh 0 0 3.3vh;
      /* 上マージンで番号と調整 */
    }

    /* メッセージ */
    #message {
      z-index: 2;
      position: fixed;
      top: 40px;
      left: 0;
      width: 100%;
      box-sizing: border-box;
      color: #000000c9;
      /* ── レスポンシブなパディング ── */
      /* 左右：最小16px、理想は5vw、最大32px */
      padding-inline: clamp(10px, 10vw, 100px);

      background: transparent;

      pointer-events: none;

    }

    /* スクロール量表示 */
    #scrollValue {
      position: fixed;
      top: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.6);
      color: #fff;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      z-index: 30;
      pointer-events: none;
    }

    #message .name {
      /* インライン→ブロックに */
      width: 100%;
      /* コンテナ幅いっぱい */
      text-align: left;
      font-weight: 600;
      font-family: Georgia, 'Times New Roman', Times, serif;
      font-size: 5em;
      line-height: 160%;
      margin: 0;
      padding: 0;
    }

    #message .namejp {
      /* インライン→ブロックに */
      width: 100%;
      /* コンテナ幅いっぱい */
      text-align: left;
      font-weight: bold;
      font-family: Georgia, 'Times New Roman', Times, serif;
      font-size: 3.5em;
      margin: 0;
      padding: 0;
    }

    #message .text {
      font-weight: normal;
      font-family: Georgia, 'Times New Roman', Times, serif;
      text-align: left;
      font-size: 2.7em;
      line-height: 1.1;
      margin-block-start: 0.2em;
      /* 上側を 0.2em に */
      margin-block-end: 5em;
      /* 下側は不要なら 0 */
      padding-inline-start: 0.8em;
      /* リストの左インデントはお好みで */
    }

    /* リスト内の項目すべてに、下側マージンを入れる */
    #message .text li {
      margin-bottom: 0.6em;
      line-height: 1.2em;
    }

    /* 扇コンテナ */
    .fan-container {
      position: fixed;
      bottom: 0;
      left: 0;
      transform-origin: 40% 75%;
      transform: translate(-35%, 22%) rotate(150deg);
      z-index: 1;
      pointer-events: none;
      will-change: transform;
    }

    .fan-container img {
      width: 100%;
      height: auto;
      display: block;
      opacity: 0.95;
    }

    #brew-steps {
      display: flex;
      flex-direction: column;
      gap: 4rem;
      margin: 8vh auto;
      width: 90%;
      max-width: 800px;
    }

    #brew-steps .step img {
      width: 100%;
      height: auto;
      border-radius: 10px;
    }

    #brew-steps .step p {
      font-size: 1.4rem;
      line-height: 1.6;
    }

    #brew-methods {
      padding-left: 5vw;
      overflow-x: auto;
    }

    .scroll-wrapper {
  padding-right: 5vw; /* ← 追加 */
  scroll-padding-left: 5vw; /* ← スナップ時の位置合わせ */
      display: flex;
      gap: 3vw;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      touch-action: pan-x;
      -webkit-overflow-scrolling: touch;
    }

    .brew-card {
      flex: 0 0 85vw;
      background: #fff;
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 0 10px #ccc;
      scroll-snap-align: start;
      box-sizing: border-box;
  scroll-snap-align: start;
}

/* カード内全体にも message と同じ書式を適用 */
.brew-card * {
  font-weight: normal;
  font-family: Georgia, 'Times New Roman', Times, serif;
  text-align: left;
font-size: 1em;
  line-height: 1.3;
  padding-inline-start: 0.8em;
}

.brew-card h2 {
  font-size: 3.5em;
  font-weight: 600;
  padding-inline-start: 0;
  margin: 0 0 0.5em 0;
  display: flex;
  align-items: center;
  gap: 0.5em;
}

.brew-card .tea span {
  font-size: 1em;
  text-align: center;
  padding: 0;
}

.brew-card img {
  max-width: 100%;
  height: auto;
  display: block;
  margin-bottom: 1rem;
  object-fit: contain;
}

    .brew-card.hot {
      border: 3px solid #d67a6b;
    }

    .brew-card.warm {
      border: 3px solid #d6b46b;
    }

    .brew-card.second {
      border: 3px solid #6bb4d6;
    }

    .brew-title {
      font-size: 2rem;
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .brew-title img {
      width: 28px;
      height: 28px;
    }

    .brew-desc {
      margin-top: 1rem;
      font-size: 1rem;
      line-height: 1.5;
    }
    .brew-desc,
#brew-steps .step p {
  font-weight: normal;
  font-family: Georgia, 'Times New Roman', Times, serif;
  text-align: left;
  font-size: 2em;
  line-height: 1.1;
  margin-block-start: 0.2em;
  margin-block-end: 5em;
  padding-inline-start: 0.8em;
}

    .brew-info {
      margin-top: 1.5rem;
      font-size: 4em;
    }

    .brew-info .item {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .brew-info img {
  max-width: 5vw;
  height: auto;
  min-width: 40px;
  max-height: 80px;
  transition: transform 0.3s ease;
}

    .ideal-for {
      margin-top: 1.5rem;
    }

    .tea-pairing {
      display: flex;
      gap: 1.5rem;
      margin-top: 0.5rem;
    }

    .tea img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
    }

    .tea span {
      display: block;
      text-align: center;
      font-size: 0.85rem;
      margin-top: 0.4rem;
    }
    #chapter2_content {
  position: absolute;
  top: 16100px;
  left: 0;
  width: 100%;
  z-index: 5;
}
  </style>
</head>

<body>

  <div id="teeraum">Teeraum</div>

  <!-- ── HTML：目次セクション ── -->
  <section id="toc">
    <ol class="toc-list">

      <li>
        <span class="toc-number">1.</span>
        <span class="toc-text">Types of Tea</span>
      </li>
      <li>
        <span class="toc-number">2.</span>
        <span class="toc-text">How to Brew</span>
      </li>
      <li>
        <span class="toc-number">3.</span>
        <span class="toc-text">Health Benefits</span>
      </li>
      <li>
        <span class="toc-number">4.</span>
        <span class="toc-text">History of Japanese Tea</span>
      </li>
    </ol>
  </section>

  <div id="chapter1">1.</div>
  <div id="chapter1_text">Types of Tea</div>

  <!-- ② メッセージ -->
  <div id="message"></div>

  <!-- ③ スクロール量表示 -->
  <div id="scrollValue">0px</div>

  <!-- ④ 扇アイコン -->
  <div class="fan-container" id="fan">
    <img src="img/ogi.png" alt="扇">
  </div>

  <div id="chapter2">2.</div>
  <div id="chapter2_text">How to Brew</div>

  <!-- Chapter 2: Brewing Steps -->
   <div id="chapter2_content">
  <section id="brew-steps">
    <div class="step">
      <img src="img/step1.png" alt="Step 1">
      <p>茶葉を急須に入れます。適量は約2g。良質な茶葉を使用すると風味がより引き立ちます。</p>
    </div>
    <div class="step">
      <img src="img/step2.png" alt="Step 2">
      <p>適温のお湯を準備します。温度は茶の種類によって異なります（下のセクション参照）。</p>
    </div>
    <div class="step">
      <img src="img/step3.png" alt="Step 3">
      <p>急須にお湯を注ぎ、一定時間待ちます。抽出時間も種類ごとに異なります。</p>
    </div>
    <div class="step">
      <img src="img/step4.png" alt="Step 4">
      <p>湯呑みに注いで完成。香りと味わいをゆっくり楽しんでください。</p>
    </div>
  </section>

  <!-- Chapter 2: Brew Types -->
  <section id="brew-methods">
    <div class="scroll-wrapper">

      <!-- Warm Brew -->
      <div class="brew-card warm">
        <h2 class="brew-title"><img src="img/icon-temp-warm.png"> Warm Brew</h2>
        <p class="brew-desc">Warm brew is gentle and brings out umami. Recommended for delicate green teas.</p>
        <div class="brew-info">
          <div class="item"><img src="img/icon-temp-warm.png"><span>60 - 70℃</span></div>
          <div class="item"><img src="img/icon-beaker-warm.png"><span>5g of tea leaves in 200 mL of water</span></div>
          <div class="item"><img src="img/icon-timer-warm.png"><span>60 - 90s</span></div>
        </div>
        <div class="ideal-for">
          <p>Ideal for:</p>
          <div class="tea-pairing">
            <div class="tea"><img src="img/gyokuro.png"><span>GYOKURO</span></div>
            <div class="tea"><img src="img/sencha.png"><span>SENCHA</span></div>
          </div>
        </div>
      </div>

      <!-- Hot Brew -->
      <div class="brew-card hot">
        <h2 class="brew-title"><img src="img/icon-temp-hot.png"> Hot Brew</h2>
        <p class="brew-desc">A quick, strong brew with boiling water. More bitterness and less umami. Good for aromatic
          teas.</p>
        <div class="brew-info">
          <div class="item"><img src="img/icon-temp-hot.png"><span>90 - 100℃</span></div>
          <div class="item"><img src="img/icon-beaker-hot.png"><span>5g of tea leaves in 200 mL of water</span></div>
          <div class="item"><img src="img/icon-timer-hot.png"><span>20 - 30s</span></div>
        </div>
        <div class="ideal-for">
          <p>Ideal for:</p>
          <div class="tea-pairing">
            <div class="tea"><img src="img/hojicha.png"><span>HOJICHA</span></div>
            <div class="tea"><img src="img/genmaicha.png"><span>GENMAICHA</span></div>
          </div>
        </div>
      </div>

      <!-- Second Brew -->
      <div class="brew-card second">
        <h2 class="brew-title"><img src="img/icon-temp-second.png"> Second Brew</h2>
        <p class="brew-desc">Second brew uses already steeped leaves, requiring shorter brew time. Adjust temperature
          slightly higher.</p>
        <div class="brew-info">
          <div class="item"><img src="img/icon-temp-second.png"><span>70 - 80℃</span></div>
          <div class="item"><img src="img/icon-beaker-second.png"><span>5g of used tea leaves in 200 mL of water</span>
          </div>
          <div class="item"><img src="img/icon-timer-second.png"><span>10 - 20s</span></div>
        </div>
        <div class="ideal-for">
          <p>Ideal for:</p>
          <div class="tea-pairing">
            <div class="tea"><img src="img/sencha.png"><span>SENCHA</span></div>
            <div class="tea"><img src="img/gyokuro.png"><span>GYOKURO</span></div>
          </div>
        </div>
      </div>

    </div>
  </section>
  </div>

  <script>
    const toc = document.getElementById('toc');
    const fan = document.getElementById('fan');
    const message = document.getElementById('message');
    const scrollValue = document.getElementById('scrollValue');

    const initialTransform = 'translate(-35%, 22%) rotate(150deg)';

    // メッセージ＆閾値(px)
    const messages = [
      "", // 初期表示用（空）
      '<span class="name">KAMAIRICHA</span><br><span class="namejp"> 釜炒り茶</span><ul class="text"><li>lorem</li><li>ipsim</li></ul>',
      '<span class="name">SENCHA</span><span class="namejp"> 煎茶</span><ul class="text"><li>Most common green tea in Japan.</li><li>Tea leaves are steamed after harvesting to prevent fermentation, resulting in the bright green colour. </li><li>Offers a delicate harmony of sweetness and astringency. </li></ul>',
      '<span class="name">MATCHA</span><span class="namejp"> 抹茶</span><ul class="text"><li>Finely ground powder from high-quality, schade-grown green tea leaves.</li><li>Whisked with hot water, not brewed like other teas. </li><li>Whisked with hot water, not brewed like other teas. </li></ul>',
      '<span class="name">HOJICHA</span><span class="namejp"> 焙じ茶</span><ul class="text"><li>Roasted green tea with a toasty aroma.</li><li>Low in caffeine, making it gentle on the stomach.</li><li>Budget-friendly and easy to prepare. </li></ul>',
      '<span class="name">GENMAICHA</span><span class="namejp"> 玄米茶</span><ul class="text"><li>A blend of green tea and roasted brown rice.</li><li>Has a toasty and savory flavor with a mild astringency from the green tea base.</li><li>Also known as “popcorn tea” due to popped rice grains. </li></ul>',
      '<span class="name">OOLONG TEA</span><span class="namejp"> 烏龍茶</span><ul class="text"><li> Semi-oxidized tea, halfway between green and black tea.</li><li>Moderate caffeine level and digestive benefits.</li><li>Common in Chinese and Taiwanese tea culture.</li></ul>',
      '<span class="name">BLACK TEA</span><span class="namejp"> 紅茶</span><ul class="text"><li>Fully oxidized tea with a dark color and strong taste.</li><li>Higher caffeine content than green or oolong tea.</li><li>Also produced in Japan (called Wakocha), althogh not (yet) widely known. </li></ul>',
      "" // 終端用（空）
    ];
    const messageThresholds = [0, 3000, 4564, 6102, 7500, 9100, 10500, 12000, 15293];

    // 速度段階設定
    const divisor = 5400;
    const breakpoints = [3, 700, 900, 1000];
    const speeds = [1.0, 0.7, 0.5, 0.2];
    const invScales = speeds.map(s => s / divisor);

    // 回転・スライド定数
    const initialDeg = 150;
    const maxRotation = 390;
    const shiftThreshold = 0.6;
    const oneMinusShiftThresh = 1 - shiftThreshold;
    const maxShiftX = 300;
    const maxShiftY = 200;

    let latestScrollY = 0;
    let ticking = false;

    window.addEventListener('scroll', () => {
      // 1) 最新の scrollY を取得
      latestScrollY = window.scrollY;
      // 2) 画面右上に表示
      scrollValue.textContent = `${latestScrollY}px`;
      // 3) アニメーション更新
      if (!ticking) {
        requestAnimationFrame(update);
        ticking = true;
      }
    }, { passive: true });

    function update() {
      // 目次パララックス効果：スクロール量の 0.5 倍だけ下へ
      const tocParallaxOffset = latestScrollY * 0.5;
      toc.style.transform = `translateY(${tocParallaxOffset}px)`;
      document.getElementById('teeraum').style.transform = `translateY(${tocParallaxOffset}px)`;
      // 実スクロール量（TOC も含む）
      const scrollOffset = latestScrollY;

      // 3px 未満なら動かさない
      if (scrollOffset < breakpoints[0]) {
        fan.style.transform = initialTransform;
        message.textContent = messages[0];
        ticking = false;
        return;
      }

      // メッセージ切り替え
      let idx = 0;
      for (let i = messageThresholds.length - 1; i >= 0; i--) {
        if (scrollOffset >= messageThresholds[i]) {
          idx = i; break;
        }
      }
      message.innerHTML = messages[idx];

      // 進捗を区間ごとに積算
      let progress;
      if (scrollOffset <= breakpoints[1]) {
        progress = scrollOffset * invScales[0];
      } else if (scrollOffset <= breakpoints[2]) {
        const base = breakpoints[1] * invScales[0];
        progress = base + (scrollOffset - breakpoints[1]) * invScales[1];
      } else if (scrollOffset <= breakpoints[3]) {
        const base = breakpoints[1] * invScales[0]
          + (breakpoints[2] - breakpoints[1]) * invScales[1];
        progress = base + (scrollOffset - breakpoints[2]) * invScales[2];
      } else {
        const base = breakpoints[1] * invScales[0]
          + (breakpoints[2] - breakpoints[1]) * invScales[1]
          + (breakpoints[3] - breakpoints[2]) * invScales[2];
        progress = base + (scrollOffset - breakpoints[3]) * invScales[3];
      }
      progress = Math.min(Math.max(progress, 0), 1);

      // 回転角度
      const rotateDeg = progress * maxRotation;

      // 左下スライド
      let shiftX = 0, shiftY = 0;
      if (progress > shiftThreshold) {
        const t2 = (progress - shiftThreshold) / oneMinusShiftThresh;
        shiftX = t2 * maxShiftX;
        shiftY = t2 * maxShiftY;
      }

      // 適用
      fan.style.transform =
        `translate(-35%, 22%) ` +
        `translateX(${-shiftX}px) ` +
        `translateY(${shiftY}px) ` +
        `rotate(${initialDeg - rotateDeg}deg)`;

      ticking = false;
    }

    // サイズ調整（必要時のみ）
    function adjustFanSize() {
      const vw = window.innerWidth, vh = window.innerHeight;
      const baseSize = Math.max(vw * 1.1, vh * 1.1);
      fan.style.width = `${baseSize}px`;
      fan.style.height = 'auto';
    }
    adjustFanSize();
    let lastWidth = window.innerWidth;
    window.addEventListener('orientationchange', () => {
      adjustFanSize();
      lastWidth = window.innerWidth;
    });
    window.addEventListener('resize', () => {
      const w = window.innerWidth;
      if (w !== lastWidth) {
        adjustFanSize();
        lastWidth = w;
      }
    });
  </script>

</body>

</html>